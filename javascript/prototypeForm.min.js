var formGroups={},errorSummary=document.querySelectorAll("div.govuk-error-summary"),e;errorSummary.length>0&&(errorSummary[0].style.display="none");var errorGroup=document.querySelectorAll("span.govuk-error-message");if(errorGroup.length>0)for(e=0;e<errorGroup.length;e++)errorGroup[e].style.display="none";function showData(){var i,a;if("undefined"!=typeof Storage){var data=window.sessionStorage,formGorupBlocks=document.getElementsByClassName("govuk-form-group");for(i=0;i<formGorupBlocks.length;i++){var objName="div"+i;formGorupBlocks[i].id?objName=formGorupBlocks[i].id:formGorupBlocks[i].id=objName;var divNodes=document.getElementById(objName).querySelectorAll(".govuk-form-group");if(divNodes.length>0)for(a=0;a<divNodes.length;a++)divNodes[a].id="ignore-"+(i+a);if(searchStart(objName,"ignore-")){var errorID,divError=document.getElementById(objName).querySelectorAll(".govuk-error-message");if(divError)for(a=0;a<divError.length;a++)errorID=divError[a].id;var inputID=[],divInputs=document.getElementById(objName).querySelectorAll("input, select, textarea");if(divInputs)for(a=0;a<divInputs.length;a++)inputID.push(divInputs[a].id);formGroups[objName]={id:objName,errorId:errorID,inputId:inputID}}}for(i=0;i<data.length;i++){var dataKey=data.key(i);if(document.getElementById(dataKey))if("checkbox"===document.getElementById(dataKey).type||"radio"===document.getElementById(dataKey).type)document.getElementById(dataKey).checked=!0;else if("file"===document.getElementById(dataKey).type){var uploadMessage=document.createElement("span");uploadMessage.id=dataKey+"--message",uploadMessage.classList.add("govuk-hint"),uploadMessage.innerText="1 file selected - "+data.getItem(dataKey),document.getElementById(dataKey).parentNode.insertBefore(uploadMessage,document.getElementById(dataKey))}else document.getElementById(dataKey).value=data.getItem(dataKey)}}else window.alert("This prototype uses session storage to save inputted information. Unfortunately this browser cannot use session storage")}function saveData(gotoURL){var pageTitle=document.title;if("undefined"!=typeof Storage){var errorSummaryList="",loopNum,data=window.sessionStorage;for(loopNum in formGroups){var currentDivId=formGroups[loopNum],currentInputId="",arrayCounter,valid=!1,validCounter=0,inputsAvailable=currentDivId.inputId.length;for(arrayCounter=0;arrayCounter<inputsAvailable;arrayCounter++){if(("checkbox"===(currentInputId=document.getElementById(currentDivId.inputId[arrayCounter])).type||"radio"===currentInputId.type)&&(data.removeItem(currentInputId.id),!0===currentInputId.checked)){var label=currentInputId.labels;data[currentInputId.id]=label[0].textContent,validCounter=inputsAvailable}if("SELECT"===currentInputId.tagName&&("0"===currentInputId.value?data.removeItem(currentInputId.id):(data[currentInputId.id]=currentInputId.value,validCounter=inputsAvailable)),"TEXTAREA"===currentInputId.tagName&&(""===currentInputId.value?(data.removeItem(currentInputId.id),searchEnd(currentInputId.id,"--opt")&&currentInputId.classList.add("govuk-textarea--error")):(currentInputId.classList.remove("govuk-textarea--error"),data[currentInputId.id]=currentInputId.value,validCounter=inputsAvailable)),"text"!==currentInputId.type&&"number"!==currentInputId.type&&"email"!==currentInputId.type&&"tel"!==currentInputId.type||(""===currentInputId.value?(data.removeItem(currentInputId.id),searchEnd(currentInputId.id,"--opt")&&currentInputId.classList.add("govuk-input--error")):(currentInputId.classList.remove("govuk-input--error"),data[currentInputId.id]=currentInputId.value,validCounter++)),"file"===currentInputId.type)if(""===currentInputId.value)data[currentInputId.id]?validCounter++:searchEnd(currentInputId.id,"--opt")&&currentInputId.classList.add("govuk-file-upload--error");else{currentInputId.classList.remove("govuk-file-upload--error");var fileUploadName=currentInputId.value.split("\\").pop();if(data[currentInputId.id]){data[currentInputId.id]=fileUploadName;var uploadMessageId=currentInputId.id+"--message";document.getElementById(uploadMessageId).innerText="1 file selected - "+fileUploadName}else{data[currentInputId.id]=fileUploadName;var uploadMessage=document.createElement("span");uploadMessage.id=currentInputId.id+"--message",uploadMessage.classList.add("govuk-hint"),uploadMessage.innerText="1 file selected - "+fileUploadName,document.getElementById(currentInputId.id).parentNode.insertBefore(uploadMessage,document.getElementById(currentInputId.id))}validCounter++}}if(validCounter===inputsAvailable&&(valid=!0),!0===valid)document.getElementById(currentDivId.errorId).style.display="none",document.getElementById(currentDivId.id).classList.remove("govuk-form-group--error");else if(searchEnd(currentInputId.id,"--opt")){document.getElementById(currentDivId.errorId).style.display="block",document.getElementById(currentDivId.id).classList.add("govuk-form-group--error");var currentError=document.getElementById(currentDivId.errorId);errorSummaryList+="<li> <a href='#"+currentDivId.inputId[0]+"'>"+currentError.innerHTML+"</a> </li>"}}if(""!==errorSummaryList){var errorList=document.querySelectorAll("ul.govuk-error-summary__list");errorList&&(errorList[0].innerHTML=errorSummaryList,errorSummary[0].style.display="block",searchStart(pageTitle,"Error: ")?document.title="Error: "+pageTitle:document.title=pageTitle,errorSummary[0].focus())}else searchStart(pageTitle,"Error: ")&&(document.title=pageTitle),errorSummary[0].style.display="none",data.reviewUrl?window.location.href=data.reviewUrl:window.location.href=gotoURL}else window.alert("This prototype uses session storage to save inputted information. Unfortunately this browser cannot use session storage")}function searchStart(inputIdName,searchString){return inputIdName.substring(0,searchString.length)!==searchString}function searchEnd(inputIdName,searchString){return inputIdName.substring(inputIdName.length-searchString.length,inputIdName.length)!==searchString}function reviewData(){if("undefined"!=typeof Storage){var i,reviewPage=window.location.href,data=window.sessionStorage;for(i=0;i<data.length;i++){var dataKey=data.key(i),element=document.getElementById(dataKey);element&&("newline"===element.getAttribute("name")?element.innerHTML=data.getItem(dataKey)+"<br>":element.innerHTML=data.getItem(dataKey)+" ")}data.reviewUrl=reviewPage}else window.alert("This prototype uses session storage to save inputted information. Unfortunately this browser cannot use session storage")}function goTo(pageUrl){pageUrl&&(window.location.href=pageUrl)}function clearData(){"undefined"!=typeof Storage?(window.sessionStorage.clear(),window.alert("All data entered has been deleted from the session storage.")):window.alert("This prototype uses session storage to save inputted information. Unfortunately this browser cannot use session storage")}